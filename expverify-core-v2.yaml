swagger: '2.0'
info:
  version: 1.0.0
  title: Experian Verify Core V2
  description: >-
       This document consists of unecrypted version of  Experian Verify service endpoints. This service returns standard income and Income employment Report which has paycheck, employer, employee PII, grosspay and other information.

host: sandbox-us-api.experian.com
basePath: /consumerservices/verification
securityDefinitions:
  OauthSecurity:
    type: oauth2
    flow: password
    tokenUrl: 'https://sandbox-us-api.experian.com/oauth2/v1/token'
    scopes:
      admin: admin scope
      user: user scope
schemes:
  - https
paths:
  '/v2/experianverify':
    post:
      description: >-
        Returns income and employment data for a given consumer from employee payroll provider.
      summary: Experian Verify income and employment report
      operationId: get income and employment data
      tags:
        - Consumer Services
      security:
        - OauthSecurity:
          - user
      parameters:
        - name: clientReferenceId
          in: header
          required: true
          description: >-
            API client generated reference Id to uniquely identify the  transaction.
          type: string
        - name: Content-Type
          in: header
          required: true
          type: string
          description: Input Request format
          enum:
            - application/json
          default: application/json
        - name: Accept
          in: header
          required: true
          type: string
          description: Output Response format
          enum:
            - application/json
          default: application/json
        - name: subcode
          in: header
          required: true
          type: string
          description: unique value provided by experian at onboarding
        - name: body
          in: body
          description: >-
            Consumer's PII , Requestor Information, Addons and any custom
            options to be specified here.
          required: true
          schema:
            $ref: '#/definitions/voieRequestParams'
      responses:
        '200':
          description: API responds with a JSON.
          schema:
            $ref: '#/definitions/voieResponse'
          headers:
            clientReferenceId:
              description: >-
                Echo back of the reference Id , if provided on API request
                header
              type: string
            experianTransactionId:
              description: Unique ID generated by Experian for this API request
              type: string
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/ErrorResponse'
          headers:
            clientReferenceId:
              description: >-
                Echo back of the reference Id , if provided on API request
                header
              type: string
            experianTransactionId:
              description: Unique ID generated by Experian for this API request
              type: string
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/AuthenticationErrorResponse'

        '403':
          description: Forbidden.
          schema:
            $ref: '#/definitions/ErrorResponse'
          headers:
            clientReferenceId:
              description: >-
                Echo back of the reference Id , if provided on API request
                header
              type: string
            experianTransactionId:
              description: Unique ID generated by Experian for this API request
              type: string
        '404':
          description: Not Found.
          schema:
            $ref: '#/definitions/ErrorResponse'
          headers:
            clientReferenceId:
              description: >-
                Echo back of the reference Id , if provided on API request
                header
              type: string
            experianTransactionId:
              description: Unique ID generated by Experian for this API request
              type: string
        '405':
          description: Method not Allowed
          schema:
            $ref: '#/definitions/ErrorResponse'
          headers:
            clientReferenceId:
              description: >-
                Echo back of the reference Id , if provided on API request
                header
              type: string
            experianTransactionId:
              description: Unique ID generated by Experian for this API request
              type: string
        '406':
          description: Not Acceptable
          schema:
            $ref: '#/definitions/ErrorResponse'
          headers:
            clientReferenceId:
              description: >-
                Echo back of the reference Id , if provided on API request
                header
              type: string
            experianTransactionId:
              description: Unique ID generated by Experian for this API request
              type: string
        '415':
          description: Unsupported Media Type
          schema:
            $ref: '#/definitions/ErrorResponse'
          headers:
            clientReferenceId:
              description: >-
                Echo back of the reference Id , if provided on API request
                header
              type: string
            experianTransactionId:
              description: Unique ID generated by Experian for this API request
              type: string
        '429':
          description: Too many requests
          schema:
            $ref: '#/definitions/ErrorResponse'
        '500':
          description: Internal Server Error.
          schema:
            $ref: '#/definitions/ErrorResponse'
        '502':
          description: bad gateway.
          schema:
            $ref: '#/definitions/ErrorResponse'
        '503':
          description: Service Unavailable.
          schema:
            $ref: '#/definitions/ErrorResponse'
        '504':
          description: Gateway Timeout.
          schema:
            $ref: '#/definitions/ErrorResponse'

definitions:
  voieRequestParams:
    type: object
    description: voie Request Body
    required:
      - consumerPii
      - requestor
      - reportType
      - permissiblePurpose
    properties:
      consumerpii:
        $ref: '#/definitions/PII'
      requestor:
        $ref: '#/definitions/Requestor'
      permissiblePurpose:
        $ref: '#/definitions/PermissiblePurpose'
      resellerInfo:
        $ref: '#/definitions/ResellerInfo'
      reportType:
          type: string
          description: report type for say plus, premium, reverification
          enum:
            - ExpVerify-Core
          default: ExpVerify-Core
      vendorData:
        $ref: '#/definitions/VendorData'
      customOptions:
        $ref: '#/definitions/CustomOptions'
      reportCustomLabels:
        $ref: '#/definitions/reselleroptionsList'
  reselleroptionsList:
     type: object
     properties:
      label1:
        $ref: '#/definitions/customfield1'
      label2:
        $ref: '#/definitions/customfield2'
      label3:
        $ref: '#/definitions/customfield3'
      label4:
        $ref: '#/definitions/customfield4'
      label5:
        $ref: '#/definitions/customfield5'

  customfield1:
    type: object
    description : custom fields
    properties:
      name:
        type: string
        description: name
      value:
        type: string
        description: pay period begin date
  customfield2:
    type: object
    description : custom fields
    properties:
      name:
        type: string
        description: name
      value:
        type: string
        description: custom field value
  customfield3:
    type: object
    description : custom fields
    properties:
      name:
        type: string
        description: name
      value:
        type: string
        description: custom field value

  customfield4:
    type: object
    description: custom fields
    properties:
      name:
        type: string
        description: name
      value:
        type: string
        description: custom field value

  customfield5:
    type: object
    description : custom fields
    properties:
      name:
        type: string
        description: name
      value:
        type: string
        description: custom field value

  PermissiblePurpose:
    type: object
    description: >-
      Specifies information on why this credit inquiry is being submitted This
      is used to denote the purpose type, terms, and amount.
    required:
      - type
    properties:
      type:
        type: string
        description: >-
          Permissible Purpose Type Code. 2 digits containing the account type
          code only.
        default: '18'

  PII:
    type: object
    description: Personally Identifiable Information
    properties:
      applicantInformation:
        $ref: '#/definitions/Applicant'
    required:
      - applicantInformation
  PAName:
    type: object
    description: Consumer's Name
    properties:
      lastName:
        type: string
        description: >-
          The full applicant's surname is required. If the surname contains two
          surnames, then split the surnames with a hyphen (e.g., Smith-Jones).
          The surname can also be input with an apostrophe (e.g., O'Brien),
          although apostrophe usage is limited to the letters D, L, and O.
        default: CONSUMER
      firstName:
        type: string
        description: >-
          The full first name is required. The minimum entry is the first name
          initial. Blanks and special characters (except dash) are not allowed.
          Compound names should contain a dash (e.g., Billy-Bob).
        default: JOHN
      middleName:
        type: string
        description: >-
          The full middle name should be entered when available. A middle
          initial is acceptable. Blanks and special characters are not allowed.
          Omit if the middle name is not available.
        default: QUINCY
      generationCode:
        type: string
        description: Generation Code
        default: Sr
    required:
      - firstName
      - lastName
  Address:
    type: object
    description: Consumer's Address
    properties:
      line1:
        type: string
        description: Address Line 1
        default: '10655 N BIRCH ST'
      line2:
        type: string
        description: Address Line 2
      line3:
        type: string
        description: Address Line 2
        default: ' '
      city:
        type: string
        description: City
        default: BURBANK
      state:
        type: string
        description: State
        default: CA
      zipCode:
        type: string
        description: ZIP Code
        default: '915021234'
    required:
      - zipCode
      - line1
      - city
      - state
  DOB:
    type: object
    description: Consumer's Date of Birth
    properties:
      dob:
        type: string
        description: >-
          Year Of Birth or Date of Birth. This describes year of birth of the
          primary applicant. It must be 4 (YYYY) or 8 (MMDDYYYY) digits.
        default: '10181955'
    required:
      - dob
  SSN:
    type: object
    description: Consumer's Social Security Number
    properties:
      ssn:
        type: string
        description: Social Security Number
        default: '123456789'
    required:
      - ssn
  Phone:
    type: object
    description: Consumer's Phone
    properties:
      number:
        type: string
        description: Phone Number
        default: 818.555.1111
      type:
        type: string
        description: Phone Type
        default: R
  Applicant:
    type: object
    description: Applicant Information to get voie
    properties:
      name:
        $ref: '#/definitions/PAName'
      ssn:
        $ref: '#/definitions/SSN'
      dob:
        $ref: '#/definitions/DOB'
      phone:
        type: array
        items:
          $ref: '#/definitions/Phone'
      currentAddress:
        $ref: '#/definitions/Address'
    required:
      - name
      - dob
      - ssn
      - currentAddress
  Requestor:
    type: object
    description: Information on the API requestor
    properties:
      subscriberCode:
        type: string
        description: Subscriber Number assigned by Experian
        default: '5991764'
      verifierName:
        type: string
        description: the company name of verifier (ex. the name of the lender)
        default: 'experian'
    required:
      - subscriberCode
      - verifierName
  VendorData:
    type: object
    description: >-
        Optional field. To understand who's application the client is using to send in the inquiry - Vendor, 3rd Party, Reseller, or client home grown.
    properties:
      vendorNumber:
        type: string
        description: Optional. Alpha-numeric. Must be 3 Character long.
        default: 1.00
      vendorVersion:
        type: string
        description: Optional. Alpha-numeric with dot(.). Max length is 6.
  ResellerInfo:
    type: object
    description : contains consumers employer information
    properties:
      endUserName:
        type: string
        description: reseller endusername
  CustomOptions:
    type: object
    description: >-
      Ancillary Options such as ICRAA (Client custom options if any that have
      been setup) that can be requested by client.
    properties:
      optionId:
        type: array
        items:
          type: string
          description: Custom option id

  voieResponse:
    type: object
    properties:
      expVerifyReport:
        $ref: '#/definitions/consumerReportResponse'
      pdfbytes:
        type: string
        description: pdf bytes array base 64 encoding
  consumerReportResponse:
    type: object
    description: Response information for consumer body
    properties:
      reportId:
        type: string
        description: unique id given to consumer report
      reportType:
        type: string
        description: type of verification report client needs for the end consumers
        enum:
            - ExpVerify-Core
        default: ExpVerify-Core
      reportGeneratedDate:
        type: string
        description: report created date by experian (unixtimestamp)
      requestor:
        $ref: '#/definitions/Requestor'
      resellerInfo:
        $ref: '#/definitions/ResellerInfo'
      reportCustomLabels:
        $ref: '#/definitions/reselleroptionsList'
      consumerPii:
        $ref: '#/definitions/PIIList'
  PIIList:
    type: object
    description: Personally Identifiable Information
    properties:
      applicantInformation:
        $ref: '#/definitions/ApplicantResponse'
      employmentHistory:
        type: array
        description : contains consumers employer information
        items:
           $ref: '#/definitions/employmentHistoryList'
  PANameResponse:
    type: object
    description: Consumer's Name
    properties:
      lastName:
        type: string
        description: >-
          Last Name given in data provider report
      firstName:
        type: string
        description: >-
          First Name given in data provider report
      middleName:
        type: string
        description: >-
          Middle Name given in data provider report
      generationCode:
        type: string
        description: Generation Code
        default: Sr
  SSNResponse:
    type: object
    description: Consumer's Social Security Number
    properties:
      ssn:
        type: string
        description: Social Security Number

  DOBResponse:
    type: object
    description: Consumer's Social Security Number
    properties:
      dob:
        type: string
        description: date of birth

  ApplicantResponse:
    type: object
    description: Applicant Information to get voie
    properties:
      name:
        $ref: '#/definitions/PANameResponse'
      ssn:
        $ref: '#/definitions/SSNResponse'
      dob:
        $ref: '#/definitions/DOBResponse'
      phone:
        type: array
        items:
          $ref: '#/definitions/Phone'
      currentAddress:
        $ref: '#/definitions/Address'
    required:
      - name
      - dob
      - ssn
      - currentAddress
  employmentHistoryList:
    type: object
    description: contains employment history details
    properties:
      asOfDate:
        type: string
        description: refreshed date
      originReportId:
        type: string
        description: Unique id provided by data provider
      originSourceId:
        type: string
        description: data furnisher
      employerIdentificationNumber:
        type: string
        description: Federal employer Identification Number
      employerName:
        type: string
        description: employer name end consumer is employed to
      originalHireDate:
        type: string
        description: date on which employee was hired
      mostRecentHireDate :
        type: string
        description: most recent date on which employee was hired. format MMDDYYYY
      positionTitle:
        type: string
        description: employee job position title
        default: string
      positionTenure:
        type: number
        description: months on the job
        default: "P2Y11M9D"
      employerAddress:
        $ref: '#/definitions/employerAddressFields'
      employmentStatus:
        $ref: '#/definitions/employmentstatus'
      workStatus:
        $ref: '#/definitions/workstatus'
      employerDisclaimers :
        type: string
        description: >-
          Employee Disclaimers placeholder

  deductionsList:
    type: object
    description: tax deductions
    properties:
     deductionCode:
        $ref: '#/definitions/deductionCodeList'
     deductionAmount:
        $ref: '#/definitions/deductionAmountList'

  deductionCodeList:
    type: object
    description: deposit details
    properties:
      name:
        type: string
        description: deposited amount for the pay period
        default: "Federal tax"
        enum:
            - Federal tax
            - State tax
            - Local tax
            - Social security tax
            - Retirement deductions
            - Garnishment deductions
            - Benefit deductions
            - SUI SDI VPDI tax
            - Other deductions
  deductionAmountList:
    type: object
    description: deposit details
    properties:
      amount:
        type: number
        description: deposited amount for the pay period
        default: "120.76"
      currencyCode:
        type: string
        description: deposited amount currency code for the pay period
        default: "USD"

  paymentHistoryList:
    type: array
    description: contains list of consumers individual paycheck data
    items:
      $ref: '#/definitions/payment'
  payment:
     type: object
     description: Summary Attributes
     properties:
      payDate:
        type: string
        description: individual paycheck generated date
      payDescription:
        type: string
        default: Salary
      payCycle:
        type: string
        description: pay frequency
      basePayRate:
        type: object
        description: base pay rate for the pay period
        properties:
          amount:
            type: number
            default: "40.85"
          currencyCode:
            type: string
            default: "USD"
      payPeriodHours:
        type: number
        description: individual paycheck hours
        default: "37.5"
      payPeriod:
        $ref: '#/definitions/payPeriodList'
      grossPayAmount:
        $ref: '#/definitions/grossPayAmountList'
      overTime:
        $ref: '#/definitions/overTimeList'
      bonus:
        $ref: '#/definitions/bonusesList'
      commissions:
        $ref: '#/definitions/commissionsList'
      deductions:
        items:
          $ref: '#/definitions/deductionsList'
      payDistributions:
        items:
           $ref: '#/definitions/payDistributionsList'

  payDistributionsList:
    type: object
    description: contains list of consumers individual paycheck deposit details
    properties:
     depositAmount:
        $ref: '#/definitions/depositList'
     depositAccount:
        $ref: '#/definitions/depositAccountList'

  depositList:
    type: object
    description: deposit details
    properties:
      amount:
        type: number
        description: deposited amount for the pay period
        default: "4200.76"
      currencyCode:
        type: string
        description: deposited amount currency code for the pay period
        default: "USD"

  depositAccountList:
    type: object
    description : deposited account details
    properties:
      routingTransitID:
        type: number
        description: routing Transit ID
        default: "103873993"
      accountNumber:
        type: string
        description: bank account number
        default: "xxxxx-0000"
      accountTypeCode:
        type: string
        description: bank account type
        enum:
          - checking
          - savings
          - share deposit
          - loan deposit
        default: checking

  commissionsList:
    type: object
    description: commission for this pay period
    properties:
      amount:
        type: number
        description: commission amount for this pay period
        default: "3000.85"
      currencyCode:
        type: string
        description: commission currency code for this pay period
        default: USD
  bonusesList:
    type: object
    description : Bonus for this pay period
    properties:
      amount:
        type: number
        description: bonus amount for this pay period
        default: 3000.85
      currencyCode:
        type: string
        description: bonus amount currency code for this pay period
        default: USD
  overTimeList:
    type: object
    description : overtime information for this pay period
    properties:
      amount:
        type: number
        description: OverTime amount for this pay period
        default: 3000.85
      currencyCode:
        type: string
        description: OverTime pay currency code for this pay period
        default: USD
  grossPayAmountList:
    type: object
    description : gross pay for this pay period
    properties:
      amount:
        type: number
        description: gross pay amount
        default: 3000.85
      currencyCode:
        type: string
        description: gross pay currency code
        default: USD
  payPeriodList:
    type: object
    description : payPeriod
    properties:
      startDate:
        type: string
        description: pay period begin date
      endDate:
        type: string
        description: pay period end date
  workstatus:
    type: object
    description: >-
      employee work status (A - Active, T - Terminated, L - Leave)
    properties:
      name:
        type: string
        description: >-
          name - Active, Terminated, Leave
      code:
        type: string
        description: >-
          code - A, T, L
  employmentstatus:
    type: object
    description: >-
      employment type (i.e. Full-time, part-time, regular, temp, contractor)
    properties:
      name:
        type: string
        description: >-
           Full time, Part time. For employers that use ADP Payroll HCM such as WorkForce Now, they can enter a freeform text to denote a worker level name for the employee, of which will be provided
      code:
        type: string
        description: >-
          code - Full time, Part time. For employers that use ADP Payroll HCM such as WorkForce Now, they can enter a freeform text to denote a worker level code for the employee, of which will be provided
  employerAddressFields:
    type: object
    description : contains employer address data elements
    properties:
      lineOne:
        type: string
        description: employer address street address
      lineTwo:
        type: string
        description: employer address street address
      lineThree:
        type: string
        description: employer address street address
      cityName:
        type: string
        description: employer address city field
      state:
        type: string
        description: employer address postal code
      countryCode:
        type: string
        description: employer address country code
      postalCode:
        type: string
        description: employer address postal code

  AuthenticationErrorResponse:
    type: object
    properties:
      errors:
        type: array
        minLength: 1
        items:
          $ref: '#/definitions/AuthenticationError'
  AuthenticationError:
    type: object
    description: Error Response
    properties:
      errorCode:
        type: string
        description: Client friendly message explaining the error
      message:
        type: string
        description: Experian generated code for this error

  ErrorResponse:
    type: object
    properties:
      errors:
        type: array
        minLength: 1
        items:
          $ref: '#/definitions/Error'
  Error:
    type: object
    description: Error Response
    properties:
      errorCode:
        type: string
        description: Client friendly message explaining the error
      message:
        type: string
        description: Experian generated code for this error
      errorType:
        type: string
        description: To identify the type of error if that is Api Validation or Backend Error.
