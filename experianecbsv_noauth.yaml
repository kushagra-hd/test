 swagger: '2.0'
 info:
  version: 1.0.0
  title: Ecbsv API
  description: "Expose Ecbsv API through Apigee"
 schemes:
  - https
 host: sandbox-us-api.experian.com
 basePath: /consumerservices/ecbsv/v1
 securityDefinitions:
  UserSecurity:
    type: basic
  OauthSecurity:
    type: oauth2
    flow: password
    tokenUrl: 'https://sandbox-us-api.experian.com/oauth2/v1/token'
    scopes:
      admin: admin scope
      user: user scope
 paths:
  #request to verify {Post}
  '/eden/verify':
    post:
      operationId: Verify_Operation
      summary: ECBSV VERIFY OPERATION
      description: This operation will verify if the included SSN,name,and date of birth combination matches or does not match the data in the Social Security Administration's records. Deceased indicators are also retuned on positive matches.
      tags:
        - Verify
      security:
        - OauthSecurity:
          - user
      parameters:
        - name: Accept
          in: header
          required: true
          type: string
          description: Type of format to Accept
          enum:
            - application/json
          default: application/json
        - name: Content-Type
          in: header
          required: true
          type: string
          description: Input request format
          enum:
            - application/json
          default: application/json
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/verifyRequest'
        - name: subcode
          in: header
          type: string
          description: Input subcode assigned when Onboarded
          default: 0000000
          required: true
        - name: companyId
          in: header
          type: string
          description: Input Company assigned when Onboarded
          default: 1234
          required: true
        - name: externalTransactionId
          in: header
          type: string
          description: An optional identifier field, as generated by the user
          default: ABC123
      responses:
        '200':
          description: Request Processed successfully
          headers:
            experianTransactionId:
              type: string
              description: Experian generated unique identifier for each request
          schema:
            $ref: '#/definitions/VerifyResponse'
        '400':
          description: Bad Request
          headers:
            experianTransactionId:
              type: string
              description: Experian generated unique identifier for each request
          schema:
            $ref: '#/definitions/VerifyResponse'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/UnauthorizedResponse'
        '403':
          description: Forbidden access
          schema:
            $ref: '#/definitions/ErrorResponse'
        '404':
          description: Not found
          schema:
            $ref: '#/definitions/ErrorResponse'
        '405':
          description: Invalid method
          schema:
            $ref: '#/definitions/ErrorResponse'
        '500':
          description: Internal server error
          schema:
            $ref: '#/definitions/UnauthorizedResponse'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/UnauthorizedResponse'
 definitions:
  verifyRequest:
    type: object
    required:
      - ein
      - product
    properties:
     ein:
      type: string
      description: Employer Identification Number of the entity that obtained the number holder consent for matching in the verification service
      default: "324658978"
     cvsRequestList:
      type: array
      description: SSN input list
      items:
        $ref: '#/definitions/RequestList'
  RequestList:
    type: object
    description: Consumer PII
    required:
      - ssn
      - dateOfBirth
      - lastName
      - firstName
    properties:
      ssn:
        type: string
        description: Number Holder�s Social Security Number
        default: "258886506"
      dateOfBirth:
        type: string
        description: Number Holder�s Date of Birth
        default: "06161951"
      lastName:
        type: string
        description: Number Holder�s last name. If the Last Name is longer than 20 characters, enter the first 20 characters of the Last Name
        default: "MOUSE"
      firstName:
        type: string
        description: Number Holder�s first name. f the First Name is longer than 15 characters, enter the first 15 characters
        default: "MICKEY"
      middleName:
        type: string
        description: Input middle name. If supplied, and middle name is longer than 15 characters, enter the first 15 characters of the Middle Name
        default: "DISNEY"
      additionalParams:
        $ref: '#/definitions/signature'
      externalSeqNumber:
        type: string
        description: Sequence number of the record request sent by the external customer
        default: "12345"
  signature:
    type: object
    required:
      - signatureType
      - dateOfConsent
    properties:
      signatureType:
        type: string
        description: Indicates Number Holder content signature type.Must be W or E
        default: "E"
      dateOfConsent:
        type: string
        description: Date consent was obtained from consumer in the format MMDDYYYY
        default: "01012020"
  VerifyResponse:
    type: object
    description: Response information for verify body
    properties:
      externalTransactionID:
        type: string
        description: Echoed back from request
      globalTransactionID:
        type: string
        description: Unique value generated by SSA for each transaction
      errorCode:
        type: string
        description: >-
          Error Code at the transaction level.
        default: "0000"
      errorCodeDesc:
        type: string
        description: Error code description at the transaction level
        default: "verified successfully"
      recordErrorCode:
        type: string
        description: Error Code at the record level.
        default: "1288"
      recordErrorCodeDesc:
        type: string
        description: Error code description at the record level
        default: "verified successfully"
      cvsResponseList:
        type: array
        description : contains verification codes and texts
        items:
           $ref: '#/definitions/responseList'
  responseList:
    type: object
    description: contains ssnverification, death indiacator codes and descriptions
    properties:
      ssnVerificationCode:
        type: string
        description: Verification code at the record Level
        default: "1283"
      ssnVerificationText:
        type: string
        description: Error code description at the record Level
        default: "eCBSV VERIFIED"
      recordErrorCode:
        type: string
        description: Verification code at the record Level
        default: "1283"
      recordErrorCodeDesc:
        type: string
        description: Error code description at the record Level
        default: "eCBSV VERIFIED"
      verificationdata:
        $ref: '#/definitions/deathIndicatorData'
      cvsRequest:
        $ref: '#/definitions/sequencenumber'
  deathIndicatorData:
     type: object
     properties:
       deathIndicatorCode:
         type: string
         description: death Indicator error codes and description
       deathIndicatorText :
          type : string
          description: death indicator description
  sequencenumber:
     type: object
     properties:
       externalSeqNumber:
          type: number
          description: Employer Identification Number of the entity that obtained the number holder consent for matching in the verification service
  UnauthorizedResponse:
    type: object
    description: contains ssnverification, death indiacator codes and descriptions
    properties:
      errors:
        type: array
        description: contains errorType and message
        items:
          $ref: '#/definitions/errormessage'
      success:
        type: string
        description: contains boolean value depends on success or failure of the request
        default: false
  ErrorResponse:
    type: object
    description: contains ssnverification, death indiacator codes and descriptions
    properties:
      errors:
        type: array
        description: contains errorType and message
        items:
          $ref: '#/definitions/errorcodes'
      success:
        type: string
        description: contains boolean value depends on success or failure of the requesto
        default: false
  errorcodes:
    type: object
    properties:
      errorType:
         type: string
         description: error type
      errorCode:
         type: string
         description: error code
      message:
         type: string
         description: error string
  errormessage:
    type: object
    properties:
      errorType:
         type: string
         description: error type
      message:
         type: string
         description: error string
